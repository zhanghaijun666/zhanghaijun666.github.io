import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as n,f as e}from"./app-efa5e96e.js";const t={},p=e(`<h3 id="一、windows-下实现端口映射" tabindex="-1"><a class="header-anchor" href="#一、windows-下实现端口映射" aria-hidden="true">#</a> 一、Windows 下实现端口映射</h3><h4 id="_1-查询端口映射情况" tabindex="-1"><a class="header-anchor" href="#_1-查询端口映射情况" aria-hidden="true">#</a> 1. 查询端口映射情况</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy show v4tov4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-查询某一个-ip-的所有端口映射情况" tabindex="-1"><a class="header-anchor" href="#_2-查询某一个-ip-的所有端口映射情况" aria-hidden="true">#</a> 2. 查询某一个 IP 的所有端口映射情况</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy show v4tov4 <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">&quot;[IP]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy show v4tov4 <span class="token operator">|</span> <span class="token function">find</span> <span class="token string">&quot;192.168.1.1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-增加一个端口映射" tabindex="-1"><a class="header-anchor" href="#_3-增加一个端口映射" aria-hidden="true">#</a> 3. 增加一个端口映射</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy <span class="token function">add</span> v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span><span class="token punctuation">[</span>外网IP<span class="token punctuation">]</span> <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token punctuation">[</span>外网端口<span class="token punctuation">]</span> <span class="token assign-left variable">connectaddress</span><span class="token operator">=</span><span class="token punctuation">[</span>内网IP<span class="token punctuation">]</span> <span class="token assign-left variable">connectport</span><span class="token operator">=</span><span class="token punctuation">[</span>内网端口<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy <span class="token function">add</span> v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span><span class="token number">2.2</span>.2.2 <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token number">8080</span> <span class="token assign-left variable">connectaddress</span><span class="token operator">=</span><span class="token number">192.168</span>.1.50 <span class="token assign-left variable">connectport</span><span class="token operator">=</span><span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_4-删除一个端口映射" tabindex="-1"><a class="header-anchor" href="#_4-删除一个端口映射" aria-hidden="true">#</a> 4. 删除一个端口映射</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy delete v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span><span class="token punctuation">[</span>外网IP<span class="token punctuation">]</span> <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token punctuation">[</span>外网端口<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>netsh interface portproxy delete v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span><span class="token number">2.2</span>.2.2 <span class="token assign-left variable">listenport</span><span class="token operator">=</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="二、linux-下实现端口映射" tabindex="-1"><a class="header-anchor" href="#二、linux-下实现端口映射" aria-hidden="true">#</a> 二、Linux 下实现端口映射</h3><h4 id="_1-允许数据包转发" tabindex="-1"><a class="header-anchor" href="#_1-允许数据包转发" aria-hidden="true">#</a> 1. 允许数据包转发</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span>/proc/sys/net/ipv4/ip_forward
iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-j</span> MASQUERADE
iptables <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-i</span> <span class="token punctuation">[</span>内网网卡名称<span class="token punctuation">]</span> <span class="token parameter variable">-j</span> ACCEPT
iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-s</span> <span class="token punctuation">[</span>内网网段<span class="token punctuation">]</span> <span class="token parameter variable">-o</span> <span class="token punctuation">[</span>外网网卡名称<span class="token punctuation">]</span> <span class="token parameter variable">-j</span> MASQUERADE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span>/proc/sys/net/ipv4/ip_forward
iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-j</span> MASQUERADE
iptables <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-i</span> ens33 <span class="token parameter variable">-j</span> ACCEPT
iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-s</span> <span class="token number">192.168</span>.50.0/24 <span class="token parameter variable">-o</span> ens37 <span class="token parameter variable">-j</span> MASQUERADE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-设置端口映射" tabindex="-1"><a class="header-anchor" href="#_2-设置端口映射" aria-hidden="true">#</a> 2. 设置端口映射</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> PREROUTING <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-m</span> tcp <span class="token parameter variable">--dport</span> <span class="token punctuation">[</span>外网端口<span class="token punctuation">]</span> <span class="token parameter variable">-j</span> DNAT --to-destination <span class="token punctuation">[</span>内网地址<span class="token punctuation">]</span>:<span class="token punctuation">[</span>内网端口<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> PREROUTING <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">-m</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">6080</span> <span class="token parameter variable">-j</span> DNAT --to-de
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,24),r=[p];function i(l,o){return s(),n("div",null,r)}const u=a(t,[["render",i],["__file","13.Windows实现端口映射.html.vue"]]);export{u as default};

import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as l,o as d,c,a as n,b as s,d as e,f as i}from"./app-efa5e96e.js";const r={},p=n("blockquote",null,[n("p",null,"什么是npm？npm是nodejs上集成的原第三方包管理工具")],-1),o=n("h2",{id:"注册npm账号",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#注册npm账号","aria-hidden":"true"},"#"),s(" 注册npm账号")],-1),u={href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"},m=i(`<h2 id="查看npm镜像-如果之前更换过-需要重置" tabindex="-1"><a class="header-anchor" href="#查看npm镜像-如果之前更换过-需要重置" aria-hidden="true">#</a> 查看npm镜像，如果之前更换过，需要重置</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> config get registry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="重置镜像路径" tabindex="-1"><a class="header-anchor" href="#重置镜像路径" aria-hidden="true">#</a> 重置镜像路径</h3><p>墙内的同学都习惯用淘宝镜像，这将不能访问npm账号，使用命令切换：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npmjs.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>之后有必要可以再切回淘宝镜像：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="创建你的npm包" tabindex="-1"><a class="header-anchor" href="#创建你的npm包" aria-hidden="true">#</a> 创建你的npm包</h2><p>在项目的git仓库下执行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>根据提示输入npm包信息，<code>package.json</code>创建完毕。</p><blockquote><p><strong>name</strong>：项目的包名，先在npm官网搜索下，或者npm install你想用的包名，以免名称已存在。<br><strong>version</strong>：版本号，以后更新也要用到。<br><strong>entry point</strong>：也就是项目main入口，默认根目录的index.js，调用这个包首先访问的文件。<br> 其他选项不是很重要，后面可以直接在<code>package.json</code>文件中修改。</p></blockquote><h2 id="在终端登录npm" tabindex="-1"><a class="header-anchor" href="#在终端登录npm" aria-hidden="true">#</a> 在终端登录npm</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> adduser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入npm账号的用户名、密码、邮箱，登录成功显示：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Logged <span class="token keyword">in</span> as xxx on https://registry.npmjs.org/.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="开始发包" tabindex="-1"><a class="header-anchor" href="#开始发包" aria-hidden="true">#</a> 开始发包</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> publish
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,18),h={href:"https://www.npmjs.com/email-edit%EF%BC%8C%E6%8C%89%E7%85%A7%E6%8F%90%E7%A4%BA%E6%89%93%E5%BC%80%E8%BF%99%E4%B8%AA%E7%BD%91%E5%9D%80%EF%BC%8C%E8%BE%93%E5%85%A5%E7%AC%AC2%E6%AD%A5%E9%85%8D%E7%BD%AE%E7%9A%84%E9%82%AE%E7%AE%B1%EF%BC%8C%E7%84%B6%E5%90%8E%E7%99%BB%E5%BD%95%E9%82%AE%E7%AE%B1%E7%82%B9%E5%87%BB%E9%82%AE%E4%BB%B6%E8%BF%9B%E8%A1%8C%E9%AA%8C%E8%AF%81%E5%8D%B3%E5%8F%AF",target:"_blank",rel:"noopener noreferrer"},b=i(`<h2 id="尝试获取npm包" tabindex="-1"><a class="header-anchor" href="#尝试获取npm包" aria-hidden="true">#</a> 尝试获取npm包</h2><p>可以先创建一个空目录：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>package-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下载完包后根目录创建一个<code>test.js</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>var t <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span> // xxx为包名
console.log<span class="token punctuation">(</span>t<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>运行<code>node test</code>，查看控制台输出是否打印插件内容。</p><h2 id="更新npm包" tabindex="-1"><a class="header-anchor" href="#更新npm包" aria-hidden="true">#</a> 更新npm包</h2><p>修改<code>package.json</code>中的版本号，同样执行:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> publish
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="撤销npm包" tabindex="-1"><a class="header-anchor" href="#撤销npm包" aria-hidden="true">#</a> 撤销npm包</h2><p>理论上npm包具有唯一性不可删除，已发布无法撤销只能更新，但是可以执行以下命令来提示该包不再维护：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> deprecate xxx<span class="token punctuation">(</span>包名<span class="token punctuation">)</span> <span class="token string">&#39;这个包我已经不再维护了&#39;</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="简单脚本" tabindex="-1"><a class="header-anchor" href="#简单脚本" aria-hidden="true">#</a> 简单脚本</h2><p>在你要发布的项目根目录创建一个文件 <code>publish</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/usr/bin/env bash</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-e</span>

<span class="token comment"># 修改npm源地址</span>
<span class="token function">npm</span> config get registry
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> <span class="token assign-left variable">registry</span><span class="token operator">=</span>http://registry.npmjs.org

<span class="token comment"># 登陆输入自己的npm账号和密码，还有邮箱</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;登录npm&#39;</span>
<span class="token function">npm</span> login

<span class="token builtin class-name">echo</span> <span class="token string">&quot;发布中...&quot;</span>
<span class="token function">npm</span> publish

<span class="token comment"># 改回npm源地址</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> <span class="token assign-left variable">registry</span><span class="token operator">=</span>https://registry.npm.taobao.org
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\\n">\\n</span>发布成功<span class="token entity" title="\\n">\\n</span>&quot;</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每次发布时运行命令 <code>sh publish</code> 输入账户信息即可发布。</p><blockquote><p>注意先修改 package 的 <code>version</code>，版本号更新才代表发布更新。</p></blockquote>`,17);function v(g,k){const a=l("ExternalLinkIcon");return d(),c("div",null,[p,o,n("blockquote",null,[n("p",null,[s("官网地址："),n("a",u,[s("https://www.npmjs.com/"),e(a)])])]),m,n("blockquote",null,[n("p",null,[s("第一次执行可能会提示：you must verify your email before publishing a new package: "),n("a",h,[s("https://www.npmjs.com/email-edit，按照提示打开这个网址，输入第2步配置的邮箱，然后登录邮箱点击邮件进行验证即可"),e(a)]),s("。")])]),b])}const x=t(r,[["render",v],["__file","60.布过npm包.html.vue"]]);export{x as default};

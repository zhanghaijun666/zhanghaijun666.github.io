import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as l,c,e as d,a as s,d as a,w as e,f as i,b as t}from"./app-d6438571.js";const k={},r={class:"table-of-contents"},u=i(`<h2 id="配置案例" tabindex="-1"><a class="header-anchor" href="#配置案例" aria-hidden="true">#</a> 配置案例</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 案例1：创建一个用户TEST_USER，有属于自己的存储空间，并且赋予dba的权限。</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> testdb datafile <span class="token string">&#39;/opt/dmdbms/data/test/testdb.DBF&#39;</span> size <span class="token number">2000</span> autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">100</span> maxsize <span class="token number">30000</span> CACHE <span class="token operator">=</span> NORMAL<span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> test_user IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;trust_user123!&quot;</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> testdb<span class="token punctuation">;</span>
<span class="token keyword">Grant</span> dba <span class="token keyword">to</span> test_user<span class="token punctuation">;</span>

<span class="token comment">-- 案例2：为数据库设置一个用户test，可创建自己表，有属于自己的独立存储空间，密码要求每60天变更一次。</span>
<span class="token keyword">CREATE</span> <span class="token keyword">tablespace</span> test datafile <span class="token string">&#39;/dm7/data/DAMENG/test1.dbf&#39;</span> size <span class="token number">32</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">user</span> test identified <span class="token keyword">by</span> dameng123 <span class="token keyword">limit</span> password_life_time <span class="token number">60</span> <span class="token keyword">default</span> <span class="token keyword">tablespace</span> test<span class="token punctuation">;</span>
<span class="token keyword">Grant</span> <span class="token keyword">CREATE</span> <span class="token keyword">table</span> <span class="token keyword">to</span> test<span class="token punctuation">;</span>

<span class="token comment">-- 案例3:规划用户test3，账户30天变更一次密码，密码尝试连接2次，连接失败，锁定5分锁，该用户可以查询dmhr.employee。</span>
<span class="token keyword">CREATE</span> <span class="token keyword">user</span> test3 identified <span class="token keyword">by</span> dameng123 <span class="token keyword">limit</span> password_life_time <span class="token number">30</span><span class="token punctuation">,</span>failed_login_attemps <span class="token number">2</span><span class="token punctuation">,</span>password_lock_time <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">Grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> dmhr<span class="token punctuation">.</span>employee <span class="token keyword">to</span> test3<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="表空间配置" tabindex="-1"><a class="header-anchor" href="#表空间配置" aria-hidden="true">#</a> 表空间配置</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 创建表空间</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> testdb datafile <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test\\testdb.DBF&#39;</span> size <span class="token number">2000</span> autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">100</span> maxsize <span class="token number">30000</span> CACHE <span class="token operator">=</span> NORMAL<span class="token punctuation">;</span>
<span class="token comment">-- 删除表空间(表空间存在数据，不允许直接删除)</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLESPACE</span> testdb<span class="token punctuation">;</span>
<span class="token comment">-- 扩展表空间</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLESPACE</span> testdb resize datafile <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test\\testdb.DBF&#39;</span> <span class="token keyword">TO</span> <span class="token number">256</span><span class="token punctuation">;</span>
<span class="token comment">-- 表空间增加数据文件</span>
<span class="token keyword">ALTER</span>  <span class="token keyword">TABLESPACE</span> testdb <span class="token keyword">ADD</span> datafile <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test1\\testdb.DBF&#39;</span> size <span class="token number">50</span> autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">1</span> maxsize <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">-- 查询表空间的数据文件存储位置</span>
<span class="token keyword">SELECT</span> file_name<span class="token punctuation">,</span>tablespace_name <span class="token keyword">FROM</span> dba_data_files<span class="token punctuation">;</span>
<span class="token comment">-- 查询表空间的状态（0---Online   1---offline）</span>
<span class="token keyword">SELECT</span> tablespace_name<span class="token punctuation">,</span><span class="token keyword">status</span> <span class="token keyword">FROM</span> dba_tablespaces<span class="token punctuation">;</span>
<span class="token comment">-- 更改表空间文件位置</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLESPACE</span> testdb <span class="token keyword">rename</span> datafile <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test\\testdb.DBF&#39;</span> <span class="token keyword">TO</span> <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test2\\testdb.DBF&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="highlight-lines"><div class="highlight-line"> </div><div class="highlight-line"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="用户配置" tabindex="-1"><a class="header-anchor" href="#用户配置" aria-hidden="true">#</a> 用户配置</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 创建表空间</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span> testdb datafile <span class="token string">&#39;D:\\tools\\db\\dmdbms\\data\\test\\testdb.DBF&#39;</span> size <span class="token number">2000</span> autoextend <span class="token keyword">on</span> <span class="token keyword">next</span> <span class="token number">100</span> maxsize <span class="token number">30000</span> CACHE <span class="token operator">=</span> NORMAL<span class="token punctuation">;</span>
<span class="token comment">-- 创建用户并指定表空间</span>
<span class="token keyword">CREATE</span> <span class="token keyword">USER</span> test_user IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;test123456!&quot;</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> testdb<span class="token punctuation">;</span>
<span class="token comment">-- 更改用户密码</span>
<span class="token keyword">ALTER</span> <span class="token keyword">user</span> test_user identified <span class="token keyword">by</span> <span class="token string">&quot;test123456#&quot;</span>
<span class="token comment">-- 锁账户：</span>
<span class="token keyword">ALTER</span> <span class="token keyword">user</span> test_user account <span class="token keyword">lock</span><span class="token punctuation">;</span>
<span class="token comment">-- 解锁账户</span>
<span class="token keyword">ALTER</span> <span class="token keyword">user</span> test_user account <span class="token keyword">unlock</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除账户（用户没有相关数据）</span>
<span class="token keyword">Drop</span> <span class="token keyword">user</span> test_user<span class="token punctuation">;</span>
<span class="token comment">-- 删除账户（用户下有数据）</span>
<span class="token keyword">DROP</span> <span class="token keyword">USER</span> test_user <span class="token keyword">cascade</span><span class="token punctuation">;</span>
<span class="token comment">-- 查看用户的口令策略参数信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> v$dm_ini t <span class="token keyword">WHERE</span> t<span class="token punctuation">.</span>para_name <span class="token operator">=</span> <span class="token string">&#39;PWD_POLICY&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="用户授权" tabindex="-1"><a class="header-anchor" href="#用户授权" aria-hidden="true">#</a> 用户授权</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 授予用户cluddb 管理员的权限</span>
<span class="token keyword">GRANT</span> dba <span class="token keyword">TO</span> TEST_USER<span class="token punctuation">;</span>
<span class="token comment">-- 回收用户管理权限</span>
<span class="token keyword">REVOKE</span> dba <span class="token keyword">FROM</span> TEST_USER<span class="token punctuation">;</span>

<span class="token comment">-- 系统权限</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_SYS_PRIVS t <span class="token keyword">WHERE</span> T<span class="token punctuation">.</span>GRANTEE <span class="token operator">=</span> <span class="token string">&#39;DBA&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 对象权限</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_TAB_PRIVS t <span class="token keyword">WHERE</span> T<span class="token punctuation">.</span>GRANTEE <span class="token operator">=</span> <span class="token string">&#39;DBA&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 角色</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_ROLE_PRIVS t <span class="token keyword">WHERE</span> T<span class="token punctuation">.</span>GRANTEE <span class="token operator">=</span> <span class="token string">&#39;SYSDBA&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 列权限</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_COL_PRIVS t <span class="token keyword">WHERE</span> T<span class="token punctuation">.</span>GRANTEE <span class="token operator">=</span> <span class="token string">&#39;TEST_USER&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 查看所有角色</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_ROLES<span class="token punctuation">;</span>
<span class="token comment">-- 查看所有用户的信息</span>
<span class="token keyword">SELECT</span> username<span class="token punctuation">,</span>user_id<span class="token punctuation">,</span>account_status <span class="token keyword">FROM</span> DBA_USERS<span class="token punctuation">;</span>
<span class="token comment">-- 查看系统中所有用户对应的角色</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> DBA_SYS_PRIVS<span class="token punctuation">;</span>
<span class="token comment">-- 可查看哪些角色可以授权给用户</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> SESSION_ROLES<span class="token punctuation">;</span>
<span class="token comment">-- 可查询当前拥有哪些系统权限</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USER_SYS_PRIVS<span class="token punctuation">;</span>
<span class="token comment">-- 可查询当前用户拥有的角色权限</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> USER_ROLE_PRIVS<span class="token punctuation">;</span>
<span class="token comment">-- 查看用户权限：</span>
<span class="token keyword">SELECT</span> name <span class="token keyword">AS</span> <span class="token string">&quot;用户名&quot;</span><span class="token punctuation">,</span> PRIVILEGE<span class="token comment"># as &quot;被授权的权限&quot;, OPTION$ as &quot;是否可以转授&quot; FROM &quot;SYSOBJECTS&quot;,SYS.SYSAUTH$ WHERE &quot;GRANTEE#&quot;=id AND subtype$  =&#39;USER&#39; ORDER BY 1,2;</span>


<span class="token comment">-- 授权并指定可以转授</span>
<span class="token keyword">REVOKE</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span><span class="token punctuation">,</span> <span class="token keyword">GRANT</span>  <span class="token keyword">PROCEDURE</span> <span class="token keyword">TO</span> clouddb <span class="token keyword">WITH</span> ADMIN <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8);function m(v,b){const n=o("router-link");return l(),c("div",null,[d(" more "),s("nav",r,[s("ul",null,[s("li",null,[a(n,{to:"#配置案例"},{default:e(()=>[t("配置案例")]),_:1})]),s("li",null,[a(n,{to:"#表空间配置"},{default:e(()=>[t("表空间配置")]),_:1})]),s("li",null,[a(n,{to:"#用户配置"},{default:e(()=>[t("用户配置")]),_:1})]),s("li",null,[a(n,{to:"#用户授权"},{default:e(()=>[t("用户授权")]),_:1})])])]),u])}const w=p(k,[["render",m],["__file","15.达梦数据库配置.html.vue"]]);export{w as default};

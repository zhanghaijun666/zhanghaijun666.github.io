import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o,c,e as r,a as s,d as e,w as l,b as n,f as d}from"./app-d6438571.js";const p={},u={class:"table-of-contents"},m=s("h2",{id:"日志文件-顺序-io",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#日志文件-顺序-io","aria-hidden":"true"},"#"),n(" 日志文件（顺序 IO）")],-1),b=s("ul",null,[s("li",null,[s("p",null,"错误日志（errorlog）"),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{bash:"",class:"language-bash"},[s("code",null,[n("mysql"),s("span",{class:"token operator"},">"),n(" show variables like "),s("span",{class:"token string"},"'log_%'"),s("span",{class:"token punctuation"},";"),n("   "),s("span",{class:"token comment"},"# 查看日志配置"),n(`
`),s("span",{class:"token function"},"cat"),n(` /etc/my.cnf
`),s("span",{class:"token comment"},"# 可以直接定义为文件路径，也可以为ON|OFF"),n(`
`),s("span",{class:"token assign-left variable"},"log_error"),s("span",{class:"token operator"},"="),n(`/var/log/mysqld.log
`),s("span",{class:"token comment"},"# 只能使用1|0来定义开关启动，默认是启动的"),n(`
`),s("span",{class:"token assign-left variable"},"log_warings"),s("span",{class:"token operator"},"="),s("span",{class:"token number"},"1"),n(`
`)])]),s("div",{class:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("div",{class:"highlight-line"}," ")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("li",null,[s("p",null,"二进制日志（bin log）"),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{bash:"",class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"# 默认是关闭的，需要通过以下配置进行开启。"),n(`
`),s("span",{class:"token comment"},"# binlog记录了数据库所有的DDL语句和DML语句，但不包括select语句内容，"),n(`
`),s("span",{class:"token comment"},"# binlog主要用于实现mysql主从复制、数据备份、数据恢复。"),n(`
log-bin`),s("span",{class:"token operator"},"="),n(`mysql-bin
`)])]),s("div",{class:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{class:"highlight-line"}," ")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("li",null,[s("p",null,"通用查询日志（general query log）"),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{bash:"",class:"language-bash"},[s("code",null,[n("mysql"),s("span",{class:"token operator"},">"),n(" show global variables like "),s("span",{class:"token string"},"'general_log'"),s("span",{class:"token punctuation"},";"),n(`
`),s("span",{class:"token comment"},"# 由于通用查询日志会记录用户的所有操作，其中还包含增删查改等信息，在并发操作大的环境下会性能，建议不要开启查询日志。"),n(`
`),s("span",{class:"token comment"},"# 启动开关 默认是关闭"),n(`
`),s("span",{class:"token assign-left variable"},"general_log"),s("span",{class:"token operator"},"="),s("span",{class:"token punctuation"},"{"),n("ON"),s("span",{class:"token operator"},"|"),n("OFF"),s("span",{class:"token punctuation"},"}"),n(`
`),s("span",{class:"token comment"},"# 日志文件变量，而general_log_file如果没有指定，默认名是host_name.log"),n(`
`),s("span",{class:"token assign-left variable"},"general_log_file"),s("span",{class:"token operator"},"="),n("/"),s("span",{class:"token environment constant"},"PATH"),n(`/TO/file
`),s("span",{class:"token comment"},"# 记录类型"),n(`
`),s("span",{class:"token assign-left variable"},"log_output"),s("span",{class:"token operator"},"="),s("span",{class:"token punctuation"},"{"),n("TABLE"),s("span",{class:"token operator"},"|"),n("FILE"),s("span",{class:"token operator"},"|"),n("NONE"),s("span",{class:"token punctuation"},"}"),n(`
`)])]),s("div",{class:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("div",{class:"highlight-line"}," ")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("li",null,[s("p",null,"慢查询日志（slow query log）"),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{bash:"",class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"# 开启慢查询日志，默认是关闭的。"),n(`
`),s("span",{class:"token assign-left variable"},"slow_query_log"),s("span",{class:"token operator"},"="),n(`ON
`),s("span",{class:"token comment"},"# 慢查询的阈值"),n(`
`),s("span",{class:"token assign-left variable"},"long_query_time"),s("span",{class:"token operator"},"="),s("span",{class:"token number"},"10"),n(`
`),s("span",{class:"token comment"},"# 日志记录文件如果没有给出file_name值， 默认为主机名，后缀为-slow.log。如果给出了文件名， 但不是绝对路径名，文件则写入数据目录。"),n(`
`),s("span",{class:"token assign-left variable"},"slow_query_log_file"),s("span",{class:"token operator"},"="),n(` file_name
`)])]),s("div",{class:"highlight-lines"},[s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("div",{class:"highlight-line"}," "),s("br"),s("div",{class:"highlight-line"}," ")]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])])],-1),v=d(`<h2 id="查询缓存-8-0-之前" tabindex="-1"><a class="header-anchor" href="#查询缓存-8-0-之前" aria-hidden="true">#</a> 查询缓存（8.0 之前）</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 需要修改配 my.cnf 置文件，在文件中增加如下内容开启缓存：</span>
<span class="token assign-left variable">query_cache_type</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token comment"># \`0\`或\`OFF\` ：会禁止使用缓存。默认选项。</span>
<span class="token comment"># \`1\`或\`ON\` ：将启用缓存，但以 SELECT SQL_NO_CACHE 开头的语句除外。</span>
<span class="token comment"># \`2\`或\`DEMAND\` ：只缓存以 SELECT SQL_CACHE 开头的语句。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 查看是否开启缓存，默认是关闭的</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">&#39;query_cache_type&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 查询缓存命中次数</span>
<span class="token keyword">SHOW</span> <span class="token keyword">STATUS</span> <span class="token operator">LIKE</span> <span class="token string">&#39;Qcache_hits&#39;</span><span class="token punctuation">;</span>
<span class="token comment">-- 清理查询缓存内存碎片。</span>
FLUSH QUERY CACHE<span class="token punctuation">;</span>
<span class="token comment">-- 从查询缓存中移出所有查询。</span>
RESET QUERY CACHE<span class="token punctuation">;</span>
<span class="token comment">-- 关闭所有打开的表，同时该操作将会清空查询缓存中的内容。</span>
FLUSH <span class="token keyword">TABLES</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="innodb-存储" tabindex="-1"><a class="header-anchor" href="#innodb-存储" aria-hidden="true">#</a> InnoDB 存储</h2><p>nnoDB 存储引擎逻辑存储结构可分为五级：表空间 &gt; 段 &gt; 区 &gt; 页（默认 16KB） &gt; 行。<br><img alt="" height="380" src="https://img-blog.csdn.net/20181011162805608?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoZW5jaGFvaGFvMTIzMjE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="570"></p>`,5);function h(g,k){const a=t("router-link");return o(),c("div",null,[r(" more "),s("nav",u,[s("ul",null,[s("li",null,[e(a,{to:"#日志文件-顺序-io"},{default:l(()=>[n("日志文件（顺序 IO）")]),_:1})]),s("li",null,[e(a,{to:"#查询缓存-8-0-之前"},{default:l(()=>[n("查询缓存（8.0 之前）")]),_:1})]),s("li",null,[e(a,{to:"#innodb-存储"},{default:l(()=>[n("InnoDB 存储")]),_:1})])])]),m,b,v])}const y=i(p,[["render",h],["__file","12.MySQL架构.html.vue"]]);export{y as default};
